<!doctype html>



  


<html class="theme-next mist use-motion" lang="zh-Hans">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Kali Linux," />





  <link rel="alternate" href="/atom.xml" title="SecretWiki" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="记录自己在 Kali Linux 安装过程中遇到的问题和解决方案。">
<meta name="keywords" content="Kali Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Kali Linux 安装笔记">
<meta property="og:url" content="https://secretwiki.org/2017/05/30/kali-install/index.html">
<meta property="og:site_name" content="SecretWiki">
<meta property="og:description" content="记录自己在 Kali Linux 安装过程中遇到的问题和解决方案。">
<meta property="og:updated_time" content="2017-06-17T09:22:49.983Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Kali Linux 安装笔记">
<meta name="twitter:description" content="记录自己在 Kali Linux 安装过程中遇到的问题和解决方案。">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":true},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://secretwiki.org/2017/05/30/kali-install/"/>





  <title>Kali Linux 安装笔记 | SecretWiki</title><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  















  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">SecretWiki</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">A place to share the thoughts</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-guestbook">
          <a href="/guestbook" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-comments"></i> <br />
            
            访客留言
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="https://secretwiki.org/2017/05/30/kali-install/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Auooo">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="SecretWiki">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Kali Linux 安装笔记</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-30T16:14:04+08:00">
                2017-05-30
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2017-06-17T17:22:49+08:00">
                2017-06-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具和环境/" itemprop="url" rel="index">
                    <span itemprop="name">工具和环境</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具和环境/网络安全/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
                  ， 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/工具和环境/网络安全/Kali-Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Kali Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          
             <span id="/2017/05/30/kali-install/" class="leancloud_visitors" data-flag-title="Kali Linux 安装笔记">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">阅读次数 </span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          

          
            <div class="post-wordcount">
              
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计</span>
                
                <span title="字数统计">
                  12,248
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长</span>
                
                <span title="阅读时长">
                  48
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>记录自己在 Kali Linux 安装过程中遇到的问题和解决方案。</p>
<a id="more"></a>
<p>注：本文为近日在物理机安装 Kali Linux 的个人笔记，仅供参考，文中的操作只是基于文中列出的特定机型和 Kali Linux 版本。</p>
<h1 id="环境说明"><a href="#环境说明" class="headerlink" title="环境说明"></a>环境说明</h1><p>物理机：神舟 K480N 笔记本，双硬盘(光驱位拆了光驱，换成了自带的 500G hdd 硬盘 ,原来的hdd硬位盘换了个 128G 的 ssd），双显卡( Nvidia GT645M + intel hd4000 集显)。</p>
<p>Kali Linux 版本：2017.1 amd64。注：<a href="http://docs.kali.org/policy/kali-linux-relationship-with-debian" target="_blank" rel="external">Kali Linux 2017.1 基于 debian 的 stretch 版本</a>，因此在安装时常见问题可以参考 debian 系的通用解决方法。</p>
<h1 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h1><p>这里没什么好说的，但要注意几个点：</p>
<ul>
<li><p>进入安装前安装引导选项的选择。出现引导界面进行安装时，不要选择 Advance Options 中的快速安装选项，虽然需要配置的地方很少，但是一个蛋疼的问题是安装后无法登录，因为不知道设置的 root 初始密码是多少（尝试了虚拟镜像下的默认密码 “toor” 但是提示错误了）。虽然可以<a href="#root-pass-rec">通过单用户模式进行修复</a>，但是终归是比较烦心的事情。</p>
</li>
<li><p>多硬盘环境下的硬盘选择。安装时选择安装到第一个硬盘，也就是在 BIOS 中第一个被识别的硬盘上。之前尝试过将硬盘拆下来分别安装系统，然后在系统启动时，在 BIOS 中选择不同硬盘进行引导，当时将 kali 安装在第二块硬盘上(原来光驱位置的 hdd 硬盘)，第一块硬盘(ssd)安装的 Windows 系统，发现在没有装回 ssd 时，kali 系统能够正常引导，但在将 ssd 装回电脑后，kali 系统死活就起不来了。摸索了几次后，决定直接将硬盘都装回电脑上，然后将 Kali 安装在第一块硬盘上，不考虑双系统的方案了。这里如果有朋友有研究的话，还请不吝赐教。关于这里的原因，参考了《鸟哥的 Linux 私房菜》,里面对于多硬盘主机的 Linux 安装有这样一段描述（《鸟哥的 Linux 私房菜 基础学习篇（第三版）》 4.4.2 章节，105 页）。 </p>
<blockquote>
<p>因为 SATA 硬盘的设备文件名是利用检测的顺序来决定的，所以你如果这样调整来调整去的话，你的 SATA 设备文件名可能会产生不同，这对于 Linux 的运行会有问题，因此如果这样随时调整 BIOS 时，可能还是会造成无法开机成功的问题。</p>
</blockquote>
</li>
<li><p>安装时语言的选择。安装时选择语言使用 English，否则安装完成后用户目录下的文件夹会变成中文（例如 Desktop 显示为“桌面”），不方便命令行操作。当然，如果不小心设置了中文，在实际使用时用户名下的目录名称又希望能以英文显示，可以<a href="#chg-dir-lang">修改配置文件</a>进行调整。</p>
</li>
<li><p>在安装时连接网络。在提示选择网络时，选择正确的网络，若都不进行配置，安装完成后在系统源中会没有任何一个源地址，也就是说 apt-get 无法获取网络源的最新软件包等信息。若安装时确实没有选择网络，那么可以<a href="#add-kali-src">手动添加 kali 更新源</a>。</p>
</li>
</ul>
<h1 id="安装后的配置–系统篇"><a href="#安装后的配置–系统篇" class="headerlink" title="安装后的配置–系统篇"></a>安装后的配置–系统篇</h1><h2 id="更新-Kali-Linux-中的软件包"><a href="#更新-Kali-Linux-中的软件包" class="headerlink" title="更新 Kali Linux 中的软件包"></a>更新 Kali Linux 中的软件包</h2><ol>
<li><p>更新软件列表信息。运行命令：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get update</div></pre></td></tr></table></figure>
<p>这里有可能遇到 apt-get 无法定位源的情况，具体可以表现为运行 apt-get update 命令后根本就没有向网络请求数据包更新，这个很可能是因为系统定义更新源的文件中无网络更新源所致。可以通过<a href="#add-kali-src">添加网络更新源</a>的方式进行修复。</p>
<p>如果嫌更新速度慢，可以自行搜索“kali更新源”关键字，查看国内其他源的地址和添加方法。本人不是很建议这样做，网络上的教程大都是之前 kali.org 被墙，而国内又没有节点时的解决方案，但是现在新版的 kali linux 会自动使用国内镜像（如大连东软的<a href="http://mirrors.neusoft.edu.cn/kali" target="_blank" rel="external">http://mirrors.neusoft.edu.cn/kali</a>节点）进行加速。很多问题都是因为添加了不够兼容的源导致的。</p>
</li>
<li><p>更新软件。运行命令：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get upgrade</div></pre></td></tr></table></figure>
<p>这里可能遇到由于网络问题导致更新不完整或中断，可以<a href="http://cn.bing.com/search?q=kali+2.0+%E6%9B%B4%E6%96%B0%E6%BA%90" target="_blank" rel="external">更新国内 kali 源</a>或者添加 –fix-missing 参数修复缺失信息（感觉有点像下载里面的断点续传？）。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get upgrade --fix-missing</div></pre></td></tr></table></figure>
</li>
<li><p>更新依赖关系。运行命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get dist-upgrade</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="更新-Kali-Linux-的内核头文件"><a href="#更新-Kali-Linux-的内核头文件" class="headerlink" title="更新 Kali Linux 的内核头文件"></a>更新 Kali Linux 的内核头文件</h2><p>在命令行中运行下面的命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install -y linux-headers-$(uname -r)</div></pre></td></tr></table></figure>
<h2 id="安装-Nvidia-显卡驱动"><a href="#安装-Nvidia-显卡驱动" class="headerlink" title="安装 Nvidia 显卡驱动"></a>安装 Nvidia 显卡驱动</h2><p>这里是个很容易踩坑的地方，主要是由于 kali 的官方文档中有如何安装 Nvidia 驱动的说明（<a href="http://docs.kali.org/general-use/install-nvidia-drivers-on-kali-linux" target="_blank" rel="external">Install NVIDIA GPU Drivers on Kali Linux</a>）。但是由于我的笔记本使用了 optimus/hybrid Graphics （显卡智能切换/混合显卡）技术，在按照官方文档进行操作后，重启后会出现无法登录的情况，屏幕提示 </p>
<blockquote>
<p><strong>Oh no! Something has gone wrong.</strong><br>A Problem has occurred and the system can’t recover. Please log out and try again.</p>
</blockquote>
<p>选择 Logout 选项，会尝试重新加载系统，但是仍旧会再次出现此报错页面，无法进入系统。</p>
<p>如果不幸遇到了这个问题，可以参考 <a href="https://www.quora.com" target="_blank" rel="external">quora</a> 上 <a href="https://www.quora.com/profile/Patrick-Himebaugh" target="_blank" rel="external">Patrick Himebaugh</a> 在问题 <a href="https://www.quora.com/How-can-I-fix-the-error-%E2%80%9Csomething-has-gone-wrong%E2%80%9D-on-Kali-Linux" target="_blank" rel="external">How can I fix the error “something has gone wrong” on Kali Linux?</a> 下的回答。如果遇到网址打不开的情况，也可以参考本文后的<a href="#restore-nvidia-driver-failure">修复方法</a>。</p>
<p>经过测试，双显卡(intel + Nvidia)电脑可用的安装方法可以参考<a href="https://forums.kali.org" target="_blank" rel="external"> kali 论坛</a>中 <a href="https://forums.kali.org/member.php?53670-TiGER511&amp;s=a28e0da34524974831d0d68c86758975" target="_blank" rel="external">TiGER511</a> 推荐的 <a href="https://forums.kali.org/showthread.php?35748-TUTORIAL-Installing-official-NVIDIA-driver-in-Optimus-laptop" target="_blank" rel="external">Installing official NVIDIA driver in Optimus laptop </a>一文。大致步骤如下：</p>
<ol>
<li><p>确认使用了混合显卡 (hybrid graphics)。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lspci | grep -E <span class="string">"VGA|3D"</span></div></pre></td></tr></table></figure>
<p>能看见存在两个显卡</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">root@kali:~$ lspci | grep -E <span class="string">"VGA|3D"</span></div><div class="line">00:02.0 VGA compatible controller: Intel Corporation 3rd Gen Core processor Graphics Controller (rev 09)</div><div class="line">01:00.0 VGA compatible controller: NVIDIA Corporation GK107M [GeForce GT 645M] (rev a1)</div></pre></td></tr></table></figure>
</li>
<li><p>禁用默认使用的显卡驱动 nouveau。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> <span class="_">-e</span> <span class="string">"blacklist nouveau\noptions nouveau modeset=0\nalias nouveau off"</span> &gt; /etc/modprobe.d/blacklist-nouveau.conf</div><div class="line">update-initramfs -u &amp;&amp; reboot</div></pre></td></tr></table></figure>
</li>
<li><p>系统将会重启，重启后 nouveau 应该被禁用了。在命令行中输入以下命令来确认 nouveau 被禁用</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">lsmod |grep -i nouveau</div></pre></td></tr></table></figure>
<p>如果输入此命令后未显示任何内容，证明 nouveau 已被成功禁用。</p>
</li>
<li><p>从 kali 的网络源中安装 nvidia 驱动。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install nvidia-driver nvidia-xconfig</div></pre></td></tr></table></figure>
<p>当然，也可以从 Nvidia 网站下载最新的 .run 文件并进行安装。不论是使用 kali 的网络源进行安装还是去 Nvidia 网站下载安装，过程都是一样的。</p>
</li>
<li><p>接下来我们需要找到我们 Nvidia 显卡的 BUS ID。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">nvidia-xconfig --query-gpu-info | grep <span class="string">'BusID : '</span> | cut <span class="_">-d</span> <span class="string">' '</span> <span class="_">-f</span>6</div></pre></td></tr></table></figure>
<p>它应该会显示如下的内容</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">PCI:1:0:0</div></pre></td></tr></table></figure>
<p>这个就是我们需要的 BUS ID。</p>
</li>
<li><p>接下来，根据<a href="http://us.download.nvidia.com/XFree86/Linux-x86/375.39/README/randr14.html" target="_blank" rel="external"> nvidia 的手册说明</a>，我们需要创建一个 <strong>/etc/X11/xorg.conf</strong> 文件，并在其中输入以下的内容</p>
 <pre>
 Section "ServerLayout"
     Identifier "layout"
     Screen 0 "nvidia"
     Inactive "intel"
 EndSection

 Section "Device"
     Identifier "nvidia"
     Driver "nvidia"
     BusID <b>"PCI:1:0:0"</b>
 EndSection

 Section "Screen"
     Identifier "nvidia"
     Device "nvidia"
     Option "AllowEmptyInitialConfiguration"
 EndSection

 Section "Device"
     Identifier "intel"
     Driver "modesetting"
 EndSection

 Section "Screen"
     Identifier "intel"
     Device "intel"
 EndSection
 </pre>

<p>将加粗部分的 “PCI:1:0:0” 替换为自己的 BUS ID，保存至 <strong>/etc/X11/xorg.conf</strong> 文件中。</p>
</li>
<li><p>接着我们根据我们的<a href="https://wiki.archlinux.org/index.php/NVIDIA_Optimus#Display_Managers" target="_blank" rel="external">显示管理器 (display manager)</a>来创建一些脚本。由于我们的 kali 默认使用的是 GDM (Gnome Display Manager)，我们需要创建两个文件：<br><strong>/usr/share/gdm/greeter/autostart/optimus.desktop</strong><br><strong>/etc/xdg/autostart/optimus.desktop</strong><br>内容均为：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">[Desktop Entry]</div><div class="line">Type=Application</div><div class="line">Name=Optimus</div><div class="line">Exec=sh -c <span class="string">"xrandr --setprovideroutputsource modesetting NVIDIA-0; xrandr --auto"</span></div><div class="line">NoDisplay=<span class="literal">true</span></div><div class="line">X-GNOME-Autostart-Phase=DisplayServer</div></pre></td></tr></table></figure>
</li>
<li><p>重启系统，这时候我们应该使用的就是 Nvidia 的驱动了。通过以下命令来确认是否一切正常</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">glxinfo | grep -i <span class="string">"direct rendering"</span></div></pre></td></tr></table></figure>
<p>如果一切正常，应当显示</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">direct rendering: Yes</div></pre></td></tr></table></figure>
</li>
<li><p>（可选）<em>安装 CUDA 套件 (CUDA toolkit)。在命令行中输入</em></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install ocl-icd-libopencl1 nvidia-cuda-toolkit</div></pre></td></tr></table></figure>
</li>
</ol>
<p>至此，显卡驱动的安装就基本结束了。但是如果遇到某些场景下的屏幕撕裂问题（包括但不限于在 VLC 中播放视频，在 Chrome/Firefox 中观看 youtube 视频等），我们可以通过<a href="#enable-prime-sync">启用 PRIME 同步 (PRIME Sync)</a> 的方法进行修复。如果卡在了启动屏幕处，也可以参考<a href="restore-nvidia-driver-failure">这篇文章</a>进行还原和修复。</p>
<h2 id="挂载第二块硬盘"><a href="#挂载第二块硬盘" class="headerlink" title="挂载第二块硬盘"></a>挂载第二块硬盘</h2><p>由于系统中有两块硬盘，之前尝试的双系统方案各种蛋疼，那么干脆就把第二块硬盘作为存储盘进行扩展。在 Linux 中，一切皆目录，和 Windows 中分区，然后划分盘符的方式不一样， Linux 中新增的硬盘应当挂载至某个目录中，具体步骤如下(参考 <a href="https://wenku.baidu.com/view/09198b2e2af90242a895e51e.html" target="_blank" rel="external">linux 增加硬盘</a>，以将硬盘划分为一个区并挂载至 /storage 目录为例)：</p>
<ol>
<li><p>使用 fdisk -l 查看系统硬盘信息。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fdisk <span class="_">-l</span></div></pre></td></tr></table></figure>
<p>能看见存在 /dev/sda 和 /dev/sdb 两块硬盘。</p>
</li>
<li><p>开始使用 fdisk 对第二块硬盘 (sdb) 进行分区。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fdisk /dev/sdb</div></pre></td></tr></table></figure>
</li>
<li><p>这时进入了 fdisk 进行操作，在</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>):</div></pre></td></tr></table></figure>
<p>后面输入 n (代表new）创建新分区。然后在</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Command action</div><div class="line">  e extended</div><div class="line">  p primary partition (1-4)</div></pre></td></tr></table></figure>
<p>输入 p，创建主分区。然后在</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Partition number (1-4):</div></pre></td></tr></table></figure>
<p>后面输入 1，添加主分区1。在之后的 First cylinder 和 Last cylinder 处都直接按下回车使用默认数值。完成后，在</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Command (m <span class="keyword">for</span> <span class="built_in">help</span>):</div></pre></td></tr></table></figure>
<p>后面输入 w，保存退出。</p>
</li>
<li><p>对分区进行格式化。在命令行中执行</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkfs.ext4 /dev/sdb1</div></pre></td></tr></table></figure>
</li>
<li><p>创建一个目录用于挂载新的硬盘。我这里由于主要想用第二块 hdd 进行大量数据的存储，因此在系统根目录下创建了一个 /storage 目录（实际使用时根据自己的喜好和习惯起名即可)</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir /storage</div></pre></td></tr></table></figure>
<p>然后挂载新创建的 /dev/sdb1 至新建的 /storage 目录</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mount /dev/sdb1 /storage</div></pre></td></tr></table></figure>
<p>使用 df 命令即可查看硬盘的挂载状态</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df</div></pre></td></tr></table></figure>
<p>若能看见 /dev/sdb1，证明硬盘已经挂载成功。</p>
</li>
<li><p>在第 5 步中的操作只是临时挂载硬盘，如果想要在系统启动时自动进行挂载动作，则可以通过修改 <strong>/etc/fstab</strong> 文件来实现。在 <strong>/etc/fstab</strong> 文件末尾加上一行:</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/dev/sdb1 /storage ext4 defaults 1 2</div></pre></td></tr></table></figure>
</li>
<li><p>对修改后的 fstab 文件配置进行测试，先使用 df 命令查看当前 /dev/sdb1 是否挂载</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df</div></pre></td></tr></table></figure>
<p>由于第五步中已经挂载成功了，此时应该是能看见 /dev/sdb1 的。接下来，现将临时挂载的硬盘取消挂载，在命令行中输入下面的命令取消挂载</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">umount /dev/sdb1</div></pre></td></tr></table></figure>
<p>然后再输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df</div></pre></td></tr></table></figure>
<p>查看 /dev/sdb1 是否已经成功取消挂载。确认已经成功取消后，最后使用 mount 命令挂载 fstab 的配置。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mount <span class="_">-a</span></div></pre></td></tr></table></figure>
<p>同理，最后执行 df 命令查看是否成功挂载，若 /dev/sdb1 成功挂载到 /storage 目录下，则证明 fstab 的自动挂载已经配置成功。</p>
</li>
</ol>
<h2 id="笔记本触摸板的配置"><a href="#笔记本触摸板的配置" class="headerlink" title="笔记本触摸板的配置"></a>笔记本触摸板的配置</h2><p>由于使用的是笔记本电脑，自带有触摸板模块，由于没有提供 Linux 下的键盘热键或类似 Windows 界面的触摸板驱动包，无法通过键盘快捷键或者配置触摸板设置来禁用触摸板，这在打字工作较多时可能给我们带来一定的困扰。在 Kali Linux 下可以通过命令行的方式来禁用和启用触摸板。</p>
<ol>
<li><p>禁用触摸板。在命令行中输入：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">modprobe -r psmouse</div></pre></td></tr></table></figure>
</li>
<li><p>启用触摸板。在命令行中输入：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">modprobe psmouse</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="add-architecture-i386">为 64 位系统添加 32 位架构的支持</h2>

<p>由于某些软件的兼容性问题，需要添加对于 32 位架构的支持。步骤如下：</p>
<ol>
<li><p>在命令行中执行</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg --add-architecture i386</div></pre></td></tr></table></figure>
</li>
<li><p>在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get update</div></pre></td></tr></table></figure>
<p>注：若在 update 时未发现有读取 i386 的库，且重启后也没有改变，则可以手动编辑 <strong>/etc/apt/sources.list</strong> 文件，在 deb 后面增加 <code>[arch=amd64,i386]</code>，完整源配置如下：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deb [arch=amd64,i386] http://http.kali.org/kali kali-rolling main non-free contrib</div></pre></td></tr></table></figure>
<p>然后重新运行 <code>apt-get update</code> 即可。</p>
</li>
</ol>
<h2 id="修改并发限制"><a href="#修改并发限制" class="headerlink" title="修改并发限制"></a>修改并发限制</h2><p>默认的操作系统会对系统资源进行限制，例如会使用 ulimit 对每个终端 shell 能使用的资源进行限制。这样在使用某些 DDOS 攻击程序会受到系统资源限制导致不能达到最佳效果。具体修改方式如下：</p>
<ol>
<li><p>通过 <code>ulimit -a</code> 查看默认值</p>
</li>
<li><p>主要通过 -s (stack size)， -m (max memory size)， -v (virtual memory)，-n (oepn files) 等参数来设置</p>
</li>
<li><p>若需要持久化保存，则可以通过修改 <strong>~/.bashrc</strong> 文件并在后面追加需要的 ulimit 命令来实现。</p>
</li>
</ol>
<h2 id="（可选）配置网络"><a href="#（可选）配置网络" class="headerlink" title="（可选）配置网络"></a>（可选）<em>配置网络</em></h2><p>参考来源：<br><a href="https://wiki.debian.org/NetworkConfiguration" target="_blank" rel="external">NetworkConfiguration</a></p>
<p>默认的 Kali Linux 在安装好后会使用 dhcp 自动获取网络地址，如果不能正确获取，可以在命令行中输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dhclient wlan0</div></pre></td></tr></table></figure>
<p>为 wlan0(根据实际需要换成实际的网卡接口，如 eth0 ，eth1 之类) 网络接口设置从 DHCP 服务器获取 IP 地址。</p>
<p>但是某些环境下需要手动配置静态 IP 地址才能访问网络，或者需要切换内网地址，或者是为一个网卡添加多个 IP 地址，这时候就需要手工指定网卡的 IP 地址。这里介绍两种临时配置 IP 地址和持久配置 IP 地址两种方式，可以根据实际业务场景选用。</p>
<h3 id="配置临时-IP-地址"><a href="#配置临时-IP-地址" class="headerlink" title="配置临时 IP 地址"></a>配置临时 IP 地址</h3><p>具体步骤如下：</p>
<ol>
<li><p>为选定的网卡配置静态 IP 地址（以 wlan0 为例）</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ifconfig wlan0 192.168.1.123/24</div></pre></td></tr></table></figure>
<p>配置完成后，可以使用 <code>ifconfig wlan0</code> 查看 IP 地址是否成功配置。</p>
</li>
<li><p>配置路由和默认网关</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">route add default gw 192.168.1.1</div></pre></td></tr></table></figure>
<p>配置完成后，可以在命令行中输入 <code>netstat -nr</code> 或者 `route -n’ 查看默认网关是否已经成功配置。</p>
</li>
<li><p>配置 DNS 服务器</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">echo</span> nameserver 114.114.114.114 &gt; /etc/resolv.conf</div></pre></td></tr></table></figure>
<p>或者也可以直接编辑 <em>/etc/resolv.conf</em> 文件来进行 DNS 服务器的配置。由于这里是直接修改了配置文件，因此 DNS 服务器信息是持久化配置的。</p>
</li>
</ol>
<p>配置临时 IP 地址时，配置的 IP 地址和网关信息会在操作系统重启后消失。</p>
<h3 id="持久配置-IP-地址"><a href="#持久配置-IP-地址" class="headerlink" title="持久配置 IP 地址"></a>持久配置 IP 地址</h3><p>通过编辑网卡接口文件 <em>/etc/network/interfaces</em> ，可以持久配置网卡的 IP 地址。以配置 wlan0 为例：</p>
<ol>
<li><p>打开 <em>/etc/network/interfaces</em> 文件，在最后加入 wlan0 的配置信息：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">auto wlan0</div><div class="line">iface wlan0 inet static</div><div class="line">    address 192.168.1.123</div><div class="line">    netmask 255.255.255.0</div><div class="line">    gateway 192.168.1.1</div><div class="line">    dns-servers 114.114.114.114 8.8.8.8</div></pre></td></tr></table></figure>
<p>当然，dns 服务器是可选的，也可以在 <em>/etc/resolv.conf</em> 中进行配置。</p>
</li>
<li><p>修改完成后，重启操作系统，配置生效。</p>
</li>
</ol>
<h2 id="install-fonts">安装字体</h2>

<p>由于会用到 IDE 写一些简单的代码，先安装几个常用的字体以备 IDE 界面的配置。推荐的有两个字体，<a href="https://github.com/yakumioto/YaHei-Consolas-Hybrid-1.12" target="_blank" rel="external">YaHei Consolas Hybrid</a> 和 <a href="http://home.ustc.edu.cn/~infinte/MSYHMONO.7z" target="_blank" rel="external">YaHei Mono</a> 。此外，使用 Wine 运行软件时会有很多地方对 <a href="http://www.myfontfree.com/download-simsun-zip75734.htm" target="_blank" rel="external">宋体 (SimSun)</a> 进行调用下载并解压缩处 ttf 后缀的文件后，安装 font-manager，在命令行输入 <code>sudo apt-get install font-manager</code> 即可。安装完成后，打开 font-manager，在其中添加我们自己的 ttf 文件即可完成字体的安装。</p>
<h2 id="增加非-root-账户"><a href="#增加非-root-账户" class="headerlink" title="增加非 root 账户"></a>增加非 root 账户</h2><p>如果习惯使用 Chromium 系列的浏览器，在打开 Chromium 或 Chrome 时，会提示不能以 root 身份运行。这里可以通过添加参数来在 root 账户下运行浏览器，但是这样会带来可能的安全问题：如果浏览器被攻破，则恶意程序获得的将是 root 权限。个人更推荐添加一个非 root 账户，在此账户下进行日常的维护操作。具体操作如下：</p>
<ol>
<li><p>添加用户</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">userad -m userabc</div></pre></td></tr></table></figure>
</li>
<li><p>为账户设置密码</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd userabc</div></pre></td></tr></table></figure>
</li>
<li><p>将创建的用户添加到 sudo 用户组（允许用户使用 sudo 进行软件安装之类的操作）</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">usermod <span class="_">-a</span> -G sudo userabc</div></pre></td></tr></table></figure>
</li>
<li><p>将创建的用户默认 shell 改为 bash</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chsh <span class="_">-s</span> /bin/bash userabc</div></pre></td></tr></table></figure>
</li>
<li><p>注销当前的 root 用户，并用新用户和密码登录，确认登录成功。后文的操作有很多是在普通用户下操作，因此会增加 sudo 命令。</p>
</li>
</ol>
<h2 id="快捷键设置"><a href="#快捷键设置" class="headerlink" title="快捷键设置"></a>快捷键设置</h2><p>用惯了 Windows 系统，总是习惯 Win + R 快速运行， Win + D 显示桌面。为了让 Kali Linux 符合使用习惯，也可以进行快捷键的配置。步骤如下：</p>
<ol>
<li><p>打开 <code>系统设置--键盘</code>。</p>
</li>
<li><p>找到其中<code>导航</code>部分的<code>隐藏所有正常窗口</code>，然后设置快捷键为 Win + D （Super + D, 在 Linux 中将 Win 键称为 Super）。</p>
</li>
<li><p>新增自定义快捷键，在命令中输入 <code>gnome-terminal</code>，快捷键设置 Super + R，名称任意填写，保存生效。</p>
</li>
<li><p>这时候使用快捷键就能实现希望的效果了，如果有其他想配置的地方，也可以按照同样的方法进行配置。</p>
</li>
</ol>
<h2 id="电源优化"><a href="#电源优化" class="headerlink" title="电源优化"></a>电源优化</h2><ol>
<li><p>在<code>设置-电源</code> 中配置无操作挂起，关闭显示器</p>
</li>
<li><p>降低显示器亮度</p>
</li>
<li><p>不使用时关闭无线网卡</p>
</li>
<li><p>开启硬盘省电选项</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hdparm -i /dev/sda <span class="keyword">if</span> AdvancedPM=yes <span class="keyword">then</span> hdparm -B 1 -S 12 /dev/sda</div></pre></td></tr></table></figure>
<p>当然，由于我的系统安装在 SSD 上，默认就已经开启了硬盘省电选项。</p>
</li>
<li><p>启动笔记本模式。创建文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#! /bin/bash</span></div><div class="line"></div><div class="line">currentMode=$(cat /proc/sys/vm/laptop_mode)</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ <span class="variable">$currentMode</span> <span class="_">-eq</span> 0 ]</div><div class="line"><span class="keyword">then</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"5"</span> &gt; /proc/sys/vm/laptop_mode</div><div class="line"><span class="built_in">echo</span> <span class="string">"Laptop Mode Enabled"</span></div><div class="line"><span class="keyword">else</span></div><div class="line"><span class="built_in">echo</span> <span class="string">"0"</span> &gt; /proc/sys/vm/laptop_mode</div><div class="line"><span class="built_in">echo</span> <span class="string">"Laptop Mode Disabled"</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<p>在使用时，即可通过 <code>./文件名</code> 的形式来开启/关闭笔记本模式。</p>
</li>
</ol>
<h2 id="根据需要开启系统服务"><a href="#根据需要开启系统服务" class="headerlink" title="根据需要开启系统服务"></a>根据需要开启系统服务</h2><p>在 <strong>/etc/init.d</strong> 目录下有大量的服务名称，可以通过 <code>服务名 start</code> 的方式来启动相应服务。</p>
<h1 id="安装后的配置–常用软件篇"><a href="#安装后的配置–常用软件篇" class="headerlink" title="安装后的配置–常用软件篇"></a>安装后的配置–常用软件篇</h1><h2 id="安装完整版-Kali-Linux"><a href="#安装完整版-Kali-Linux" class="headerlink" title="安装完整版 Kali Linux"></a>安装完整版 Kali Linux</h2><p>之所以安装 Kali 就是为了其中的安全类工具，因此更新完整版的 Kali Linux 是必须的。在命令行中输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install kali-linux-all</div></pre></td></tr></table></figure>
<p>即可完成完整版的 Kali Linux 安装。</p>
<h2 id="安装-watchdog"><a href="#安装-watchdog" class="headerlink" title="安装 watchdog"></a>安装 watchdog</h2><p>在系统使用过程中，可能会遇到系统关闭时等待 90 秒才关闭的问题。这个是由于关机时，某个进程没有结束，systemd 在为此等待 90 秒。屏幕显示: </p>
<blockquote>
<p>A stop job is running for Session……<br>对于这个问题可以采用两种方案来解决，一种是采取 systemd 降级的方法，虽然有效，但是太麻烦。另一种是通过安装 watchdog 的方法来解决，操作起来会简单不少，具体步骤如下：</p>
</blockquote>
<ol>
<li><p>安装 watchdog</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt install watchdog</div></pre></td></tr></table></figure>
</li>
<li><p>开启 watchdog 服务</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl <span class="built_in">enable</span> watchdog.service</div></pre></td></tr></table></figure>
</li>
<li><p>马上启用 watchdog 服务</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl start watchdog.service</div></pre></td></tr></table></figure>
</li>
</ol>
<p>通过上述几步，就能解决关机等待 90 秒的问题了。（然而我仍然出现了等待 90s 后才关机的问题，有待进一步观察）</p>
<h2 id="配置中文输入法"><a href="#配置中文输入法" class="headerlink" title="配置中文输入法"></a>配置中文输入法</h2><p>由于默认的是英文环境下进行安装，并没有中文输入法，因此需要额外安装中文输入法以供日常使用。输入法有两大类以供选择，ibus 和 fcitx。体验下来各有优劣。</p>
<h3 id="IBUS"><a href="#IBUS" class="headerlink" title="IBUS"></a>IBUS</h3><p>先说 ibus，这个安装配置非常简单，直接在命令行中输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install ibus ibus-pinyin</div></pre></td></tr></table></figure>
<p>即可完成安装。然后在系统设置的区域和语言部分添加中文拼音输入法即可。输入法中英文切换可以使用右上角的输入法指示栏，也可以使用 ctrl + space 快捷键进行切换。</p>
<p>但是，在使用过程中，发现响应速度不是很令人满意，特别是有大量中英文切换需求时，经常发生卡顿的现象，另外，在中文输入法的英文状态下利用 shift 键输入大写英文字母时，会自动切换到中文输入法，非常难用。最后选择切换到了 fcitx 系列。</p>
<h3 id="（推荐）fcitx"><a href="#（推荐）fcitx" class="headerlink" title="（推荐）fcitx"></a>（推荐）fcitx</h3><p>fcitx 的安装相对来说曲折一些。主要是安装了 fcitx 后不知道如何启用相应的输入法，在系统设置的区域和语言部分添加中文输入法时，没有相应的配置，尝试在安装了 fcitx 后在命令行中输入 fcitx 后会报错</p>
<blockquote>
<p>(WARN-12251 /build/fcitx-SJV5lg/fcitx-4.2.9.1/src/lib/fcitx-config/fcitx-config.c:922) 配置项不合法:  行150 缺少’=’</p>
</blockquote>
<p>一直以为是由于这个报错导致了不能正确启用输入法。为了解决这个问题查阅了很多资料，尝试了不少方法，甚至尝试了最后发现只要无视这个报错就好了。启用 fcitx 时应当在 im-config 中进行配置。具体安装过程如下（以搜狗输入法为例）：</p>
<ol>
<li><p>去搜狗官网下载对应版本的 deb 包，然后在命令行输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i sogoupinyin_2.1.0.0086_amd64.deb</div></pre></td></tr></table></figure>
<p>进行安装。安装过程中会很多告警信息提示依赖包不存在的问题，无视即可。</p>
</li>
<li><p>在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install <span class="_">-f</span></div></pre></td></tr></table></figure>
<p>修复缺失的依赖关系。</p>
</li>
<li><p>在命令行输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">im-config</div></pre></td></tr></table></figure>
<p>在弹出的窗口中按照提示操作，选择使用 fcitx 作为输入法。操作完毕后会提示重启。</p>
</li>
<li><p>重启后，在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fcitx-config-gtk3</div></pre></td></tr></table></figure>
<p>在其中进行 fcitx 的相关配置，可以按照自己的使用习惯设置默认输入法和输入法切换快捷键。至此搜狗输入法已经安装完成，当然，若要安装其他的 fcitx 系列输入法，也是类似的操作过程。</p>
</li>
</ol>
<h2 id="安装-Chromium-Chrome-浏览器"><a href="#安装-Chromium-Chrome-浏览器" class="headerlink" title="安装 Chromium/Chrome 浏览器"></a>安装 Chromium/Chrome 浏览器</h2><p>Windows 下习惯了基于 Webkit 内核的 Chromium 引擎快速的响应速度、强大的开发者工具，好用的插件和账户同步功能，而 Kali Linux 中默认安装的是 Firefox ESR，只能手动来安装了。浏览器安装时有两个选择，一种是选择开源的 Chromium 浏览器，另外一种就是基于 Chromium 开发的闭源 Google Chrome。两种浏览器安装都很简单。</p>
<ul>
<li><p>安装 Chromium 浏览器</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install chromium</div></pre></td></tr></table></figure>
</li>
<li><p>安装 Google Chrome 浏览器</p>
<p>  去 <a href="https://www.google.cn/chrome/browser/desktop/" target="_blank" rel="external">chrome 浏览器官网</a> 下载 deb 安装包，然后使用 dpkg 进行安装</p>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i google-chrome-stable_current_amd64.deb</div></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="安装翻墙软件"><a href="#安装翻墙软件" class="headerlink" title="安装翻墙软件"></a>安装翻墙软件</h2><p>由于天朝的 GFW，翻墙是必备的，总不能天天在大局域网中被 bat 之流强奸。考虑到国内外网络的访问速度，选择安装 Shadowsocks 并辅助以 Lantern。</p>
<h3 id="安装-Shadowsocks-客户端"><a href="#安装-Shadowsocks-客户端" class="headerlink" title="安装 Shadowsocks 客户端"></a>安装 Shadowsocks 客户端</h3><p>Linux 下的客户端推荐使用 <a href="https://github.com/shadowsocks/shadowsocks-qt5" target="_blank" rel="external">Shadowsocks-qt5</a>。使用 apt 的 <code>apt-get install shadowsocks-qt5</code> 进行安装时会报错“无法定位软件包 libqtshadowsocks-dev ”，最后使用的是<a href="https://github.com/shadowsocks/shadowsocks-qt5/wiki/%E5%AE%89%E8%A3%85%E6%8C%87%E5%8D%97#debian" target="_blank" rel="external"> Shadowsocks-qt5 官方文档</a>推荐的源码编译安装的方式。具体步骤参考了 <a href="http://www.jianshu.com/p/aa48a0a5b30e" target="_blank" rel="external">Kali Linux 下安装 Shadowsocks-qt5</a>。编译安装过程如下：</p>
<ol>
<li><p>编译安装 libQtShadowsocks-dev</p>
<ol>
<li><p>使用 git 获取 libQtShadowsocks 源代码</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/shadowsocks/libQtShadowsocks.git</div></pre></td></tr></table></figure>
</li>
<li><p>安装依赖</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install qtbase5-dev qt5-qmake qt5-default libbotan1.10-dev unzip debhelper</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录并编译</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> libqtshadowsocks-dev</div><div class="line">qmake&amp;make</div></pre></td></tr></table></figure>
</li>
<li><p>打包</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg-buildpackage -uc -us -b</div></pre></td></tr></table></figure>
<p>此命令完成后，会在上一层目录生成 libQtShadowsocks 的安装包</p>
</li>
<li><p>安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i ../libqtshadowsocks_1.10.0-1_amd64.deb ../libqtshadowsocks-dev_1.10.0-1_amd64.deb</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>编译安装 shadowsocks-qt5</p>
<ol>
<li><p>使用 git 获取 Shadowsocks-qt5 源代码</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> https://github.com/shadowsocks/shadowsocks-qt5.git</div></pre></td></tr></table></figure>
</li>
<li><p>安装依赖</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install qt5-qmake qtbase5-dev libqrencode-dev libqtshadowsocks-dev libappindicator-dev libzbar-dev libbotan1.10-dev</div></pre></td></tr></table></figure>
</li>
<li><p>进入目录并编译</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> shadowsocks-qt5</div><div class="line">qmake &amp;&amp; make</div></pre></td></tr></table></figure>
</li>
<li><p>打包</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg-buildpackage -uc -us -b</div></pre></td></tr></table></figure>
<p>此命令完成后，会在上一层目录生成 Shadowsocks-qt5 的安装包</p>
</li>
<li><p>安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i ../shadowsocks-qt5_2.8.0-1_amd64.deb</div></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>至此，安装已经完成。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ss-qt5</div></pre></td></tr></table></figure>
<p>即可打开 Shadowsocks-qt5 的客户端并配置参数进行科学上网。如果对 Shadowsocks 技术尚不了解，可以参阅<a href="http://www.auooo.com/2015/06/26/shadowsocks%EF%BC%88%E5%BD%B1%E6%A2%AD%EF%BC%89%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%8C%87%E5%8D%97/" target="_blank" rel="external">Shadowsocks 不完全指南</a>，虽然这篇文章已经有一段时间未更新了，但是较为全面地介绍了 Shadowsocks 的实现原理和配置方法。</p>
</li>
</ol>
<h3 id="安装-Lantern-客户端"><a href="#安装-Lantern-客户端" class="headerlink" title="安装 Lantern 客户端"></a>安装 Lantern 客户端</h3><p>Lantern 的实现原理和 Shadowsocks 极为类似，之所以安装这个，是为了在自己的 Shadowsocks 账号出现问题的情况下，可以有一个临时性的备用翻墙方式。Lantern 官方提供的 deb 包可以直接下载安装。步骤如下：</p>
<ol>
<li><p>下载安装包，可以去 <a href="https://getlantern.org/" target="_blank" rel="external">Lantern 官网</a>或者去 <a href="https://github.com/getlantern/lantern-binaries" target="_blank" rel="external">github 上的仓库</a> 下载对应版本的安装包。</p>
</li>
<li><p>使用 dpkg 进行安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i lantern-installer-beta-64-bit.deb</div></pre></td></tr></table></figure>
</li>
<li><p>可以在命令行中输入’lantern’，或者在系统中搜索 Lantern 打开 Lantern，然后就能自由上网了。</p>
</li>
</ol>
<h2 id="更换-JDK-（多版本-JDK-共存）"><a href="#更换-JDK-（多版本-JDK-共存）" class="headerlink" title="更换 JDK （多版本 JDK 共存）"></a>更换 JDK （多版本 JDK 共存）</h2><p>由于版权原因，系统自带的是 OpenJDK，由于<a href="https://zhihu.com/question/19646618/answer/40621705" target="_blank" rel="external">开源的 OpenJDK 和闭源的 Oracle JDK 存在着不少区别</a>，我们可以切换使用 Oracle JDK。步骤如下：</p>
<ol>
<li><p>下载 Oracle JDK。访问 <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="external">Oracle JDK 下载页面</a>下载对应版本的最新 tar.gz 包。</p>
</li>
<li><p>解压缩 tar.gz 包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -zxvf jdk-8u131-linux-x64.tar.gz</div></pre></td></tr></table></figure>
</li>
<li><p>使用 update-alternatives 进行安装，这样不会卸载原有的 OpenJDK，在以后需要时可以随时切换回来。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo update-alternatives --install /usr/bin/java java /storage/jdk1.8.0_131/bin/java 1</div><div class="line">sudo update-alternatives --install /usr/bin/javac javac /storage/jdk1.8.0_131/bin/javac 1</div><div class="line">sudo update-alternatives --install /usr/bin/jar jar /storage/jdk1.8.0_131/bin/jar 1</div><div class="line">sudo update-alternatives --install /usr/lib/mozilla/plugins/libjavaplugin.so mozilla-javaplugin.so /storage/jdk1.8.0_131/jre/lib/amd64/libnjp2.so 1</div></pre></td></tr></table></figure>
<p>注意，第二个路径为解压的 JDK 路径，具体安装时以实际路径为准。最后的数字为优先级，默认的 OpenJDK 优先级数值为 1081，因此我们这里的数字只要比 1081 小即可。</p>
</li>
<li><p>确认成功安装并启用。在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">java -version</div><div class="line">javac -version</div></pre></td></tr></table></figure>
<p>查看其中信息是否为 Oracle JDK 的信息。<br>此外，在 Firefox 浏览器中访问 <a href="https://www.java.com/en/download/installed.jsp" target="_blank" rel="external">https://www.java.com/en/download/installed.jsp</a>，查看浏览器是否正确识别安装的 java 版本。</p>
</li>
<li><p>其他版本的 Java也可以按照类似的方法来安装配置。如果需要切换版本，可以使用以下命令进入命令行交互模式并选择想要使用的版本。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo update-alternatives --config java</div><div class="line">sudo update-alternatives --config javac</div><div class="line">sudo update-alternatives --config jar</div><div class="line">sudo update-alternatives --config mozilla-javaplugin.so</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="安装-IDE"><a href="#安装-IDE" class="headerlink" title="安装 IDE"></a>安装 IDE</h2><h3 id="Pycharm"><a href="#Pycharm" class="headerlink" title="Pycharm"></a>Pycharm</h3><p>Pycharm 的安装非常简单，步骤如下：</p>
<ol>
<li><p>去<a href="https://www.jetbrains.com/pycharm/download/#section=linux" target="_blank" rel="external">官网下载压缩包</a></p>
</li>
<li><p>解压压缩包。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar -xvf pycharm-professional-2017.1.3.tar.gz</div></pre></td></tr></table></figure>
</li>
<li><p>进入解压后 pycharm 的 bin 目录并执行 pycharm.sh 文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> pycharm-2017.1.3/bin</div><div class="line">./pycharm.sh</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="安装文本编辑器"><a href="#安装文本编辑器" class="headerlink" title="安装文本编辑器"></a>安装文本编辑器</h2><h3 id="小巧的文本编辑器-Notepadqq"><a href="#小巧的文本编辑器-Notepadqq" class="headerlink" title="小巧的文本编辑器 Notepadqq"></a>小巧的文本编辑器 Notepadqq</h3><p>Windows 下的 Notepad++ 非常好用，可惜却没有 Linux 版本，但是在 Linux 下有一款叫作 <a href="http://notepadqq.altervista.org/s/" target="_blank" rel="external">Notepadqq</a> 的软件，与 Notepad++ 非常类似，下面说一下具体安装过程(参考 <a href="http://www.2daygeek.com/install-notepadqq-source-code-editor-in-arch-linux-mint-ubuntu-debian-fedora/#" target="_blank" rel="external">Notepadqq – Source Code Editor for Linux</a>)：</p>
<ol>
<li><p>安装依赖。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt install qt5-default libqt5webkit5-dev libqt5svg5-dev qttools5-dev-tools</div></pre></td></tr></table></figure>
</li>
<li><p>获取 notepadqq 源码。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git <span class="built_in">clone</span> --recursive https://github.com/notepadqq/notepadqq.git</div></pre></td></tr></table></figure>
</li>
<li><p>对源码进行编译安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> notepadqq</div><div class="line">./configure --prefix /usr</div><div class="line">make</div><div class="line">sudo make install</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Linux-平台下的-Office-编辑套件-LibreOffice"><a href="#Linux-平台下的-Office-编辑套件-LibreOffice" class="headerlink" title="Linux 平台下的 Office 编辑套件 LibreOffice"></a>Linux 平台下的 Office 编辑套件 LibreOffice</h3><p>Office 系列文件的编辑和处理在 Linux 上一直是硬伤，由于微软没有提供 Microsoft Office 的 Linux 版本，要查看和编辑 Office 文档只能使用<a href="https://products.office.com/zh-cn/office-online/documents-spreadsheets-presentations-office-online" target="_blank" rel="external">在线版的 Office</a>，或者在 wine/crossover 中安装 Windows 版本的 MS Office 软件，此外，也可以使用支持 Linux 平台的编辑软件来实现。Linux 下的第三方 Office 编辑器主要有 <a href="https://zh-cn.libreoffice.org/" target="_blank" rel="external">LibreOffice</a>， <a href="linux.wps.cn/">WPS Office</a>， <a href="http://www.yozosoft.com/products/yozooffice.htm" target="_blank" rel="external">永中 Office</a>， <a href="https://www.openoffice.org/zh-cn/" target="_blank" rel="external">OpenOffice</a> 等。在这些软件中，LibreOffice 相对来说已经是做得很不错的了。安装也很简单，直接在命令行中运行 <code>sudo apt-get install libreoffice</code> 即可成功安装。</p>
<h3 id="MarkDown-编辑器-ReText"><a href="#MarkDown-编辑器-ReText" class="headerlink" title="MarkDown 编辑器 ReText"></a>MarkDown 编辑器 ReText</h3><p>MarkDown 虽然到现在尚无完全统一的语法和解析标准，但是大部分的规则是公认的，利用它来写笔记是个非常惬意的事情。自带的 gedit 文本编辑器虽然支持 MarkDown 语法，但是功能太过薄弱，因此安装 <a href="https://github.com/retext-project/retext" target="_blank" rel="external">ReText</a> 作为 MarkDown 编辑器，安装过程很简单，命令行输入 <code>sudo apt-get install retext</code> 即可完成安装。但是其强大的功能需要进一步配置后才能发挥作用。配置过程如下：</p>
<ol>
<li><p>为 ReText 配置 Github stylesheet。访问 <a href="https://gist.github.com/EndangeredMassa/8849279" target="_blank" rel="external">https://gist.github.com/EndangeredMassa/8849279</a>，下载 github.css 文件，然后在 ReText 中选择 <code>编辑-个人偏好-交互界面-样式表文件</code>，选择使用下载的 github.css 文件。重启 ReText 后即可生效。</p>
</li>
<li><p>添加数学公式。首先安装 MathJax，在命令行中输入 </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install libjs-mathjax</div></pre></td></tr></table></figure>
<p>安装完毕后，在 ReText 中选择 <code>编辑-个人偏好-行为-Markdown 语法扩展</code>，在其中输入 <code>mathjax</code>，重启 ReText 即可。</p>
</li>
<li><p>添加语法高亮。首先安装高亮支持模块 python-pygments，在命令行中输入 </p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install python-pygments</div></pre></td></tr></table></figure>
<p>安装完毕后，在 ReText 中选择 <code>编辑-个人偏好-行为-Markdown 语法扩展</code>，在其中输入 <code>codehilite</code>。这里要注意，若 Markdown 语法扩展下方的文本框原先有内容，比如上一步的 mathjax，需要在后面追加 “逗号 + codehilite”。参阅 ReText 的官方文档可知，文档里的扩展功能添加进ReText的Markdown extensions时，都必须改成小写字母，否则无效。同时，两个扩展之间用英文逗号分割。因此，这时候内容应该变成 <code>mathjax,codehilite</code>。完成后重启 ReText 即可。</p>
</li>
<li><p>修改字体。在 <code>编辑-修改编辑器字体</code>和<code>编辑-修改预览字体</code>处，选择需要的字体。我这里选择的均为 <code>YaHei-Consolas-Hybrid-Normal Regular</code>。</p>
</li>
</ol>
<h2 id="安装虚拟化软件"><a href="#安装虚拟化软件" class="headerlink" title="安装虚拟化软件"></a>安装虚拟化软件</h2><p>虚拟化环境作为必备软件之一，显然也是需要配置的，毕竟偶尔总需要跑些其他平台的软件，或者跑些测试的环境之类。</p>
<h3 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h3><p>开源的 <a href="https://www.virtualbox.org/" target="_blank" rel="external">VirtualBox</a> 安装很简单，直接使用 <code>sudo apt-get install virtualbox</code> 进行安装即可。</p>
<h3 id="VMWare-WorkStation"><a href="#VMWare-WorkStation" class="headerlink" title="VMWare WorkStation"></a>VMWare WorkStation</h3><ol>
<li><p>去<a href="http://www.vmware.com/cn/products/workstation-for-linux.html" target="_blank" rel="external">官网下载安装包</a>，得到 VMware-Workstation-Full-12.5.6-5528349.x86_64.bundle 文件。</p>
</li>
<li><p>赋予 bundle 文件执行权限</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x VMware-Workstation-Full*.bundle</div></pre></td></tr></table></figure>
</li>
<li><p>运行 bundle 文件执行安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ./VMware-Workstation-Full*.bundle</div></pre></td></tr></table></figure>
</li>
<li><p>注：运行时会出现报错</p>
<blockquote>
<p>Gtk-Message: Failed to load module “atk-bridge”: /usr/lib/x86_64-linux-gnu/libatspi.so.0: undefined symbol: g_type_class_adjust_private_offset<br>(vmware-installer.py:13903): Gtk-WARNING **: 无法在模块路径中找到主题引擎：“murrine”</p>
</blockquote>
<p>尝试着搜索解决方案，主要是参考了 <a href="https://stackoverflow.com/questions/21007052/gtk-warning-unable-to-locate-theme-engine-in-module-path-murrine-error-whi" target="_blank" rel="external">stackoverflow 上的类似问题</a>下的各种回答，安装了高分答案下推荐的所有依赖包，仍然报错。弃疗后直接安装，然而也能正常完成安装。目前也未发现影响使用的情况，暂时就不研究了～</p>
</li>
</ol>
<h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>Docker 的安装可以参考其<a href="https://store.docker.com/editions/community/docker-ce-server-debian" target="_blank" rel="external">官方文档</a>，稍微修改一下即可。步骤如下（以 docker-ce 为例）：</p>
<ol>
<li><p>安装依赖（默认应该都有安装）</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get -y install apt-transport-https ca-certificates curl software-properties-common</div></pre></td></tr></table></figure>
</li>
<li><p>导入 docker 的 gpg 签名</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -fsSL https://download.docker.com/linux/debian/gpg | sudo apt-key add -</div></pre></td></tr></table></figure>
</li>
<li><p>在 /etc/apt/sources.list.d/ 目录下新建 docker.list 文件，输入以下的 docker 仓库地址并保存</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deb [arch=amd64] https://download.docker.com/linux/debian stretch stable</div></pre></td></tr></table></figure>
</li>
<li><p>更新软件源并安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get -y install docker-ce</div></pre></td></tr></table></figure>
</li>
<li><p>安装完成后，可以通过以下命令启动 docker 服务</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl start docker</div></pre></td></tr></table></figure>
<p>或者</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo service docker start</div></pre></td></tr></table></figure>
</li>
<li><p>验证 docker 安装成功</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo docker run hello-world</div></pre></td></tr></table></figure>
</li>
<li><p>此时，docker 已经成功安装，正常使用即可。当然，也可以进行进一步的配置，比如<a href="#manage-docker-as-a-non-root-user">使用非 root 用户管理 docker</a>，<a href="#configure-docker-to-start-on-boot">配置 docker 随系统启动</a><a href="#change-default-image-container-location-docker">修改 Docker 默认的镜像和容器存储位置</a>等。</p>
</li>
</ol>
<h2 id="安装多媒体播放器"><a href="#安装多媒体播放器" class="headerlink" title="安装多媒体播放器"></a>安装多媒体播放器</h2><h3 id="音乐播放器-DeaDBeeF"><a href="#音乐播放器-DeaDBeeF" class="headerlink" title="音乐播放器 DeaDBeeF"></a>音乐播放器 DeaDBeeF</h3><p>Windows 下的音乐播放器使用的是 Foobar2000，在 Linux 平台下没有对应的版本，可以使用 <a href="http://deadbeef.sourceforge.net/" target="_blank" rel="external">DeaDBeeF</a> 来代替。由于在 kali 源中并没有 DeaDBeeF，因此不能使用 apt-get 直接安装，而需要去 <a href="http://deadbeef.sourceforge.net/download.html" target="_blank" rel="external">DeaDBeeF 官网下载页面</a>进行下载。下载了 deb 包后，运行 ‘sudo dpgk -i deadbeef-static_0.7.2-2_amd64.deb` 进行安装即可完成。但是需要注意，DeaDBeeF 在播放无损音乐时，不是直接添加 cue 索引文件，而是在添加 ape，flac 等音乐文件时自动加载同一目录下的同名 cue 文件。另外，如果加载 cue 文件后发现是乱码，可以在 Deadbeef 菜单栏：编辑–偏好设置–用户界面/杂项 中，取消俄语编码选项，勾选中文 CP936 编码选项，然后清空播放列表，再次添加歌曲，即可顺利显示中文。</p>
<h3 id="网易云音乐"><a href="#网易云音乐" class="headerlink" title="网易云音乐"></a>网易云音乐</h3><p>偶尔想要换换口味，听听在线歌曲，可以使用网易云音乐。虽然因为版权问题导致了很多歌曲下架，但是其用户体验还是领先同类型的其他产品一大截的。网易云音乐官方提供有 Linux 版本，但是在 Kali 下安装会有依赖问题，最后参考了<a href="https://zhuanlan.zhihu.com/p/25461131" target="_blank" rel="external"> Kali Linux 2016.2(Rolling) 网易云音乐安装</a>，终于安装成功。具体步骤如下：</p>
<ol>
<li><p>下载安装包。链接: <a href="https://pan.baidu.com/s/1i5l1wsX" target="_blank" rel="external">https://pan.baidu.com/s/1i5l1wsX</a></p>
</li>
<li><p>使用 dpkg 安装软件包。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dpkg -i netease-cloud-music_1.0.0-1_amd64.kali.deb</div></pre></td></tr></table></figure>
</li>
<li><p>修复依赖关系。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get <span class="_">-f</span> install</div></pre></td></tr></table></figure>
</li>
</ol>
<p>不过，话说回来，网易云音乐这种本身就基于网络的播放器价值不大，如果嫌麻烦，完全可以使用网页版代替。</p>
<h3 id="第三方的网易云音乐播放器-FeelUOwn"><a href="#第三方的网易云音乐播放器-FeelUOwn" class="headerlink" title="第三方的网易云音乐播放器 FeelUOwn"></a>第三方的网易云音乐播放器 FeelUOwn</h3><p><a href="https://github.com/cosven/FeelUOwn" target="_blank" rel="external">FeelUOwn</a> 是由 <a href="https://github.com/cosven" target="_blank" rel="external">cosven</a> 开发维护的一款第三方网易云音乐播放器，对于某些没有网易没有版权的音乐自动使用虾米源进行播放，有插件和主题切换功能，喜欢自己 DIY 的小伙伴可以使用这个来代替网易云音乐的客户端。安装步骤可以参考项目上的介绍：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install python3-pip</div><div class="line">sudo -H pip3 install feeluown</div><div class="line">feeluown-install-dev   <span class="comment"># 安装依赖</span></div><div class="line">mkdir ~/.FeelUOwn</div><div class="line">feeluown-genicon   <span class="comment"># 生成图标</span></div><div class="line"></div><div class="line"><span class="comment">### 运行</span></div><div class="line">feeluown</div><div class="line"></div><div class="line"><span class="comment">### 开发者运行</span></div><div class="line">feeluown <span class="_">-d</span></div><div class="line"></div><div class="line"><span class="comment">### 更新，建议没事可以更新它，会有一些小的bug修复</span></div><div class="line"><span class="comment">### 有大的更新的时候，运行软件的时候会提示</span></div><div class="line">pip3 install feeluown --upgrade</div></pre></td></tr></table></figure>
<h2 id="安装-QQ"><a href="#安装-QQ" class="headerlink" title="安装 QQ"></a>安装 QQ</h2><p>尝试了很多第三方的教程，都出现了各种问题无法成功安装，最后直接去了<a href="http://phpcj.org/about/" target="_blank" rel="external">清风</a>的博客，使用其 <a href="http://phpcj.org/wineqq/" target="_blank" rel="external">WineQQ</a> 8.9 版本，在 Kali 下安装成功。具体步骤如下：</p>
<ol>
<li><p>下载 WineQQ 最新的 8.9 版本 <code>wineQQ8.9.3_21149.tar.xz</code>。</p>
</li>
<li><p>为了能正常运行 WineQQ，需要安装 <a href="https://wiki.winehq.org" target="_blank" rel="external">winehq</a>。具体安装过程可以参考 <a href="https://wiki.winehq.org/Debian" target="_blank" rel="external">winehq 的官方文档</a><br>首先，<a href="#add-architecture-i386">开启系统对32位的支持</a>，然后获取并导入签名</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget -nc https://dl.winehq.org/wine-builds/Release.key</div><div class="line">sudo apt-key add Release.key</div></pre></td></tr></table></figure>
<p>接着，在 /etc/apt/sources.list.d/ 目录下新建一个 <code>winehq.list</code> 文件（文件名可自定义，以 list 作为文件扩展名即可），文件内容为：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deb https://dl.winehq.org/wine-builds/debian/ stretch main</div></pre></td></tr></table></figure>
<p>注：<a href="http://docs.kali.org/policy/kali-linux-relationship-with-debian" target="_blank" rel="external">Kali Linux 2017.1 基于 debian 的 stretch 版本</a>，若为其他版本，则需做相应修改。完成后，需更新包信息，在命令行中输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div></pre></td></tr></table></figure>
<p>最后进行安装即可。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install --install-recommends winehq-devel</div></pre></td></tr></table></figure>
</li>
<li><p>解压下载的压缩包至用户主目录</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar xvf wineQQ8.9.2_20760.tar.xz -C ~/</div></pre></td></tr></table></figure>
</li>
<li><p>此时，在系统菜单中已经能看见 Wine QQ，点击后运行，会提示需要下载某个软件包（MONO），选择下载即可。下载完成后，即可正常运行。<br>此外，如果之前未安装字体，会存在部分中文显示为方框的情况，这时参考前文的<a href="#install-fonts">安装字体</a>部分进行配置后，重启即可正常显示。<br>当然，毕竟是修改版，存在着一些bug，目前已遇到问题：视频结束后会闪退，无法保存密码。但是作为一个及时消息型软件，最主要的文字沟通和文件传输之类的功能能够正常使用，已经满足了需求。</p>
</li>
</ol>
<h2 id="其他需要的软件"><a href="#其他需要的软件" class="headerlink" title="其他需要的软件"></a>其他需要的软件</h2><p>由于很少将 Linux 作为主办公环境，还有很多软件并没怎么用到，这里主要参考了[安全牛]上房苑弘的 [Kali Linux 渗透测试教程]上推荐的一些软件，也欢迎大家回复和推荐好应用:)。在命令行中输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install smplayer gdebi amule qbittorrent geany stardict meld ttf-wqy-microhei kchmviewer mtr filezilla filezilla-common monodevelop</div></pre></td></tr></table></figure>
<p>大致介绍一下这些软件：</p>
<ul>
<li>libreoffice：开源的 Office 组件。</li>
<li>smplayer：多媒体播放器。</li>
<li>gdebi：图形化的 deb 包管理工具。</li>
<li>amule：电驴，下载工具。</li>
<li>qbittorrent：比特彗星，下载工具。</li>
<li>geany：一个轻量级的 IDE。</li>
<li>stardict：星际译王。字典工具，现在貌似已经停止维护和更新了。但是字典支持很强大，可以下载到字典配合使用。</li>
<li>meld：文件差异比较工具。</li>
<li>ttf-wqy-microhei：文泉驿微米黑中文字体。</li>
<li>kchmviewer：chm 文件查看器。</li>
<li>mtr：winMTR 的 Linux 版本，网络诊断工具。</li>
<li>filezilla， filezilla-common：FTP工具。</li>
<li>monodevelop：开发工具集。</li>
</ul>
<h1 id="安装后的配置–浏览器篇"><a href="#安装后的配置–浏览器篇" class="headerlink" title="安装后的配置–浏览器篇"></a>安装后的配置–浏览器篇</h1><h2 id="Chromium"><a href="#Chromium" class="headerlink" title="Chromium"></a>Chromium</h2><h3 id="安装-Flash-插件"><a href="#安装-Flash-插件" class="headerlink" title="安装 Flash 插件"></a>安装 Flash 插件</h3><p>Chromium 登录账户后，扩展(Extensions)都同步了，没什么好说的。但是很多视频无法播放，需要安装配置 Flash 插件。在 Chrome 中有内置的 Flash 插件，选择启用即可。但是 Chromium 需要安装一个叫作 pepperflash 的插件才能支持 Flash 功能。步骤如下（参考 <a href="https://debian-jessie.blogspot.com/2014/10/debian-64-bit-chromium-and-flash.html" target="_blank" rel="external">How to install Flash Player on Debian with Chromium</a>）：</p>
<ol>
<li><p>首先在浏览器中打开 <a href="chrome://flash/" target="_blank" rel="external">chrome://flash/</a>，查看 flash 是否已经安装。</p>
</li>
<li><p>若在上一步确认 flash 插件未安装，在浏览器中打开 <a href="https://packages.debian.org/sid/amd64/pepperflashplugin-nonfree/download" target="_blank" rel="external">pepperflashplugin 下载页面</a>，选择一个服务器进行下载。</p>
</li>
<li><p>下载完毕后，在命令行中使用 dpkg 进行安装</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo dpkg -i pepperflashplugin-nonfree_1.8.3+num1_amd64.deb</div></pre></td></tr></table></figure>
</li>
<li><p>（可选）<em> 升级 pepperflash</em></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo update-pepperflashplugin-nonfree --install</div></pre></td></tr></table></figure>
</li>
<li><p>查看 pepperflash 安装状态</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo update-pepperflashplugin-nonfree --status</div></pre></td></tr></table></figure>
<p>若显示类似下面的信息，则说明 pepperflash 已经安装成功。</p>
<blockquote>
<p>Flash Player version installed on this system  : 25.0.0.171<br>Flash Player version available on upstream site: 25.0.0.171</p>
</blockquote>
<p>再在浏览器中打开 <a href="chrome://flash/" target="_blank" rel="external">chrome://flash/</a> 查看是否显示安装成功。</p>
</li>
<li><p>此时打开视频站，应该就可以正常观看视频了。如果遇到某些视频能看见播放框，但是没有内容，很有可能是浏览器默认禁用了第三方站点的数据和 cookie 所致，可以参考 <a href="#chromium-unblock-third-party-cookies">FAQ 部分的解决方法</a>。</p>
</li>
</ol>
<h3 id="关闭-GPU-加速"><a href="#关闭-GPU-加速" class="headerlink" title="关闭 GPU 加速"></a>关闭 GPU 加速</h3><p>使用 Chromium/Chrome 时，经常会发现风扇疯转，系统资源占用蹭蹭地往上涨，此外，偶尔会出现卡死的情况，一定要切换到其他窗口再切换回来才正常。查阅资料发现是由于 Chromium 系列浏览器的 GPU 加速功能导致的。于是乎我们来关闭 GPU 加速功能，步骤如下：</p>
<ol>
<li><p>打开浏览器，找到 <code>Settings--Show advanced settings--System</code></p>
</li>
<li><p>取消 ‘Use hardware acceleration when available’ 的勾选</p>
</li>
<li><p>打开 <a href="chrome://flags/" target="_blank" rel="external">chrome://flags/</a>，在里面搜索 GPU 相关的选项，全部关闭。</p>
</li>
<li><p>重启浏览器，就可以享受到流畅的网络体验了。</p>
</li>
</ol>
<h2 id="Firefox"><a href="#Firefox" class="headerlink" title="Firefox"></a>Firefox</h2><h3 id="Flash-插件"><a href="#Flash-插件" class="headerlink" title="Flash 插件"></a>Flash 插件</h3><p>Flash 是个天坑，毕竟本身漏洞太多了，安全性是个大问题，因此很多浏览器默认都不带或者不启用 Flash 插件。如果不得不用的话，也只能安装了。步骤如下（参考<a href="https://forums.kali.org/showthread.php?977-Install-Flash-Player-for-Iceweasel-Firefox-in-3-Simple-Steps" target="_blank" rel="external">Install Flash Player for Iceweasel / Firefox in 3 Simple Steps</a>）：</p>
<ol>
<li><p>在浏览器中打开 <a href="http://get.adobe.com/flashplayer/" target="_blank" rel="external">Flash 下载链接</a>，选择 tar.gz 格式并下载。</p>
</li>
<li><p>解压缩下载的 tar.gz 文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tar xzvf install_flash_player_11_linux.x86_64.tar.gz</div></pre></td></tr></table></figure>
</li>
<li><p>将解压出的 libflashplayer.so 拷贝至 Firefox 的插件目录下。</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp libflashplayer.so /usr/lib/mozilla/plugins/</div></pre></td></tr></table></figure>
</li>
<li><p>重启浏览器，就能正常显示 flash 内容了。</p>
</li>
</ol>
<h3 id="渗透测试相关扩展"><a href="#渗透测试相关扩展" class="headerlink" title="渗透测试相关扩展"></a>渗透测试相关扩展</h3><p>Firefox 下有很多优秀的插件，渗透测试需要的一些插件在此列出，可以根据需要进行安装。</p>
<ul>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/autoproxy-ng/" target="_blank" rel="external">AutoProxy-ng</a>：继承自 AutoProxy，类似 Chrome 下的 SwitchOmega，可以方便地设置和切换浏览器代理。<br>  注：不知道为什么，发现有个bug，最近其代理类型总是全部变成 socks5 类型，导致无法正常工作，已经暂时禁用，直接在浏览器中配置代理，等待进一步研究。</li>
<li><a href="https://addons.mozilla.org/en-Us/firefox/addon/cookie-importer/" target="_blank" rel="external">Cookie Importer</a>：用于 cookie 的导入</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/cookies-manager-plus/" target="_blank" rel="external">Cookie Manager</a>：强大的 cookie 管理扩展，可以替代浏览器自带的 cookie 查看器，管理网站 cookie 信息。</li>
<li><a href="https://github.com/gantt/downloadyoutube" target="_blank" rel="external">Download YouTube Video as MP4</a>：如其名字所述，以 MP4 格式下载 YouTube 视频。</li>
<li><a href="http://getfirebug.com/" target="_blank" rel="external">Firebug</a>：Firefox 下最出名的插件了，虽然我觉得没有 Chrome 自带的 F12 好用～<a href="Migrating from Firebug">现在已经集成到了 Firefox 的 DevTools 中</a>。</li>
<li><a href="https://flagfox.wordpress.com/" target="_blank" rel="external">Flagfox</a>：可以显示网站所在国家的国旗。</li>
<li><a href="flashgot.net">FlashGot</a>：下载扩展，可以提高下载的速度和稳定性，此外也有嗅探视音频资源的功能。</li>
<li><a href="https://addons.mozilla.org/zh-cn/firefox/addon/hackbar/" target="_blank" rel="external">HackBar</a>：web 渗透必备插件。快捷键 F9，遇到 HackBar 不显示也可以按下 F9 试试哦。</li>
<li><a href="https://hashr.rogeriopvl.com/#/" target="_blank" rel="external">hashr</a>：可根据选择的主流算法计算字符串的哈希值。</li>
<li><a href="http://livehttpheaders.mozdev.org/" target="_blank" rel="external">Live HTTP headers</a>：可以显示和修改 http 请求头。</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/sql-inject-me/" target="_blank" rel="external">SQL Inject Me</a>：用于 SQL 注入测试。此插件不能直接在 Extensions 中安装，需要打开链接下载安装。</li>
<li><a href="http://tamperdata.mozdev.org/" target="_blank" rel="external">Tamper Data</a>：用于跟踪和修改 http/https 请求。</li>
<li><a href="http://chrispederick.com/work/user-agent-switcher/" target="_blank" rel="external">User Agent Switcher</a>：用于修改 User-Agent。</li>
<li><a href="https://addons.mozilla.org/en-US/firefox/addon/xss-me/" target="_blank" rel="external">XSS Me</a>：用于 XSS 漏洞测试。此插件不能直接在 Extensions 中安装，需要打开链接下载安装。</li>
</ul>
<h1 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h1><h2 id="root-pass-rec">通过单用户模式找回root密码</h2>

<p>参考来源：<a href="http://jingyan.baidu.com/article/47a29f24560e77c0142399e3.html" target="_blank" rel="external">Kali 2.0忘记登录密码时重置密码的方法</a></p>
<p>大致步骤如下：</p>
<ol>
<li><p>启动 Kali Linux，等出现GRUB引导菜单时，按向下方向键选择“恢复模式”，按E键进入编辑模式；</p>
</li>
<li><p>进入编辑模式后，将 single 模式中的 ro 选项修改为 rw，修改完成后，按下 F10 或 Ctrl + X 键继续启动，启动完成后，出现命令行界面；</p>
</li>
<li><p>在命令行中输入 passwd root，即可重设 root 用户密码。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">passwd root</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="chg-dir-lang">将中文目录改为英文目录</h2>

<p>参考来源：<a href="http://www.programgo.com/article/26681265264/" target="_blank" rel="external">将Ubuntu的“桌面”改为“Desktop”</a></p>
<p>以文件夹“桌面”修改为“Desktop”为例：</p>
<ol>
<li><p>到当前用户的根目录，将文件夹“桌面”重命名为“Desktop“；</p>
</li>
<li><p>修改用户的 user-dirs.dirs 文件，将原来的</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XDG_DESKTOP_DIR=<span class="string">"<span class="variable">$HOME</span>/桌面"</span></div></pre></td></tr></table></figure>
<p>修改为：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">XDG_DESKTOP_DIR=<span class="string">"<span class="variable">$HOME</span>/Desktop"</span></div></pre></td></tr></table></figure>
</li>
<li><p>其他的目录同理修改；</p>
</li>
<li><p>logout，重新登录即可。</p>
</li>
</ol>
<h2 id="add-kali-src">添加 kali 官方网络更新源</h2>

<p>参考资料：<a href="http://docs.kali.org/general-use/kali-linux-sources-list-repositories" target="_blank" rel="external">Kali sources.list Repositories</a></p>
<p>编辑 /etc/apt/sources.list，在文件中加入下面这几行</p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">deb http://http.kali.org/kali kali-rolling main contrib non-free</div><div class="line"><span class="comment"># For source package access, uncomment the following line</span></div><div class="line"><span class="comment"># deb-src http://http.kali.org/kali kali-rolling main contrib non-free</span></div></pre></td></tr></table></figure>
</code></pre><h2 id="restore-nvidia-driver-failure">修复 Kali Linux 安装 Nvidia 显卡驱动后报错 “something has gone wrong” </h2>

<p>参考来源:<br><a href="https://www.quora.com/How-can-I-fix-the-error-%E2%80%9Csomething-has-gone-wrong%E2%80%9D-on-Kali-Linux" target="_blank" rel="external">Quora 上 Patrick Himebaugh 的回答</a><br><a href="https://forums.kali.org/showthread.php?35748-TUTORIAL-Installing-official-NVIDIA-driver-in-Optimus-laptop" target="_blank" rel="external">Kali 论坛中 TiGER511 的方案</a></p>
<p>具体步骤如下：</p>
<ol>
<li><p>通过 Grub 引导菜单，进入高级启动中的修复模式，使用 root 在命令行下取消 nouveau 的黑名单并移除修改的 xorg 文件，或者简单粗暴地直接删除全部相关文件：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">apt-get remove --purge nvidia*</div><div class="line">rm -rf /etc/X11/xorg.conf</div></pre></td></tr></table></figure>
<p>注：如果不知道如何进入修复模式，也可以使用组合键<strong> CTRL + ALT + F2 </strong> 或者 <strong> CTRL + ALT + F3 </strong>唤出命令行登录界面，然后使用密码进行登录。</p>
</li>
<li><p>移除之前创建的显示管理器文件（GDM 环境）:</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">rm -rf /usr/share/gdm/greeter/autostart/optimus.desktop</div><div class="line">rm -rf /etc/xdg/autostart/optimus.desktop</div></pre></td></tr></table></figure>
</li>
</ol>
<p>注：此方案也可用于卸载在3.3部分安装的显卡驱动。</p>
<h2 id="enable-prime-sync">启用 PRIME 同步 (PRIME Sync) 来解决屏幕撕裂问题</h2>

<p>参考来源：<br><a href="https://forums.kali.org/showthread.php?35748-TUTORIAL-Installing-official-NVIDIA-driver-in-Optimus-laptop" target="_blank" rel="external">Installing official NVIDIA driver in Optimus laptop</a></p>
<ol>
<li><p>确认 PRIME 是否被禁用。在命令行中运行</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xrandr --verbose | grep PRIME</div></pre></td></tr></table></figure>
<p>这条命令应该会显示类似下面的信息：  <strong>PRIME Synchronization:0</strong>  <strong>PRIME Syncroninzation:1</strong></p>
<p>第一个就是我们连接的显示。因此 PRIME 同步是禁用的。</p>
</li>
<li><p>编辑 <strong>/etc/default/grub</strong> 文件，在<strong> GRUB_CMDLINE_LINUX_DEFAULT</strong> 一栏的 <strong>quite</strong> 后面追加 <strong>nvidia-drm.modeset=1</strong>，修改后的效果类似这样子：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">....</div><div class="line">GRUB_CMDLINE_LINUX_DEFAULT=<span class="string">"quiet nvidia-drm.modeset=1"</span></div><div class="line">....</div></pre></td></tr></table></figure>
</li>
<li><p>保存修改，更新 GRUB：</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">update-grub</div></pre></td></tr></table></figure>
</li>
<li><p>重启系统</p>
</li>
<li><p>确认是否启用 PRIME。在命令行输入</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">xrandr --verbose | grep PRIME</div></pre></td></tr></table></figure>
<p>此时应该显示类似下面的输出：<br><strong>PRIME Synchronization: 1</strong><br><strong>PRIME Synchronization: 1</strong>  </p>
<p>如果仍然显示的是 0，那么很可能是系统配置或者系统内核有些问题，或者是运气问题，毕竟该技术本身就是 Nvidia 一个测试性功能。</p>
</li>
</ol>
<h2 id="chromium-unblock-third-party-cookies">Chromium 浏览器只能看见播放框但没有播放内容的解决方法</h2>

<p>参考来源：<a href="https://www.chromium.org/for-testers/bug-reporting-guidelines/uncaught-securityerror-failed-to-read-the-localstorage-property-from-window-access-is-denied-for-this-document" target="_blank" rel="external">Uncaught SecurityError: Failed to read the ‘localStorage’ property from ‘Window’: Access is denied for this document</a></p>
<p>在 Chromium 浏览器中按下键盘的 F12 键，查看是否有报错信息，若在 console 中有报错信息</p>
<blockquote>
<p>Uncaught SecurityError: Failed to read the ‘localStorage’ property from ‘Window’: Access is denied for this document.</p>
</blockquote>
<p>则是由于 Chromium 浏览器默认禁用了第三方站点的数据和 cookie 所致。</p>
<p>解决方法也很简单，打开 Chromium 浏览器的设置 <a href="chrome://settings/" target="_blank" rel="external">chrome:settings</a>，依次找到 <code>Show advanced settings--Privacy--Content settings--Cookies</code>，在其中的 `Block third-party cookies and site data’ 上取消勾选。</p>
<p>这时候再刷新播放不正常的界面，即可正常观看视频。</p>
<h2 id="manage-docker-as-a-non-root-user">使用非 root 用户管理 Docker</h2>

<p>Docker 实例绑定在 Unix Socket 上，而不是绑定的 TCP 端口。而默认情况下 Unix Socket 是由 root 用户控制的，其他用户只能通过 sudo 命令来获取权限。为了省去每次运行 docker 都加上 sudo 的麻烦，可以配置一个 docker 用户组，并设置在 docker 实例启动时，Unix Socket 的所有关系变为 docker 组可读写。下列的步骤参考自<a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="external">docker 官方文档</a>。</p>
<ol>
<li><p>创建 docker 组</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo groupadd docker</div></pre></td></tr></table></figure>
</li>
<li><p>将我们常用的用户( userabc 为例)加入 docker 组</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo usermod <span class="_">-a</span>G docker userabc</div></pre></td></tr></table></figure>
</li>
<li><p>重启系统以使修改的组成员关系生效</p>
</li>
<li><p>确认 docker 可以直接运行，而不用加 sudo 命令</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">docker run hello-world</div></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="configure-docker-to-start-on-boot">配置 Docker 随系统启动</h2>

<p>参考自<a href="https://docs.docker.com/engine/installation/linux/linux-postinstall/#configure-docker-to-start-on-boot" target="_blank" rel="external">docker 官方文档</a></p>
<p>在命令行中输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl <span class="built_in">enable</span> docker</div></pre></td></tr></table></figure>
<p>若要禁用 docker 随系统启动，则可以在命令行中输入</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl <span class="built_in">disable</span> docker</div></pre></td></tr></table></figure>
<h2 id="change-default-image-container-location-docker">修改 Docker 默认的镜像和容器存储位置</h2>

<p>参考：<br><a href="https://sanenthusiast.com/change-default-image-container-location-docker/" target="_blank" rel="external">Change default Image and Container location in Docker</a><br><a href="https://docs.docker.com/engine/reference/commandline/dockerd/#linux-configuration-file" target="_blank" rel="external">docker 官方文档</a></p>
<p>默认的 docker 会在 /var/lib/docker 目录下存储其镜像与容器，由于空间分配关系，需要修改其默认存储位置，步骤如下：</p>
<ol>
<li><p>在命令行输入 <code>docker info</code>，找到其中的 <code>Storage Driver</code> 字段，并记录其中的值（我的是 overlay2，所有可能的值可以参考 <a href="https://docs.docker.com/engine/userguide/storagedriver/selectadriver/" target="_blank" rel="external">docker 文档</a>）</p>
</li>
<li><p>停止 Docker 服务</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo systemctl stop docker</div></pre></td></tr></table></figure>
</li>
<li><p>新版本（推荐）：在 /etc/docker 目录下创建 daemon.json 文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo touch /etc/docker/daemon.json</div></pre></td></tr></table></figure>
<p>在其中输入以下内容并保存</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"graph"</span>: <span class="string">"/storage/pentest/docker"</span>,</div><div class="line">    <span class="string">"storage-driver"</span>: <span class="string">"overlay2"</span>,</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>老版本：在 /etc/systemd/system 下创建 docker.service.d 目录，并在此目录下新建 docker.conf 文件</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo mkdir /etc/systemd/system/docker.service.d</div><div class="line">sudo touch /etc/systemd/system/docker.service.d/docker.conf</div></pre></td></tr></table></figure>
<p>在新建的 docker.conf 文件中写入以下内容并保存</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">[Service]</div><div class="line">ExecStart=</div><div class="line">ExecStart=/usr/bin/dockerd --graph=<span class="string">"/storage/docker"</span> --storage-driver=overlay2</div></pre></td></tr></table></figure>
<p>其中，graph 后面的值即为我们想要移动的新目录，storage-driver 后的值即为我们在第一步时记录的 Storage Driver 值。这个 docker.conf 文件会覆盖默认的 docker 配置文件 <code>/lib/systemd/system/docker.service</code>，具体原因可以参考 <a href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html" target="_blank" rel="external">systemd 文档</a>。</p>
</li>
<li><p>重载服务(service deamon)并启动 docker 服务</p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo systemctl daemon-reload </div><div class="line">sudo systemctl start docker</div></pre></td></tr></table></figure>
<p>可以在命令行中输入 <code>docker info</code> ，查看其中的 <code>Docker Root Dir</code> 字段的值，以确认修改成功。</p>
</li>
</ol>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Kali-Linux/" rel="tag"># Kali Linux</a>
          
        </div>
      

      
        
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/06/08/Reading-Notes-Web-Penetration-Testing-with-Kali-Linux-Second-Edition/" rel="prev" title="Reading Notes: Web Penetration Testing with Kali Linux, Second Edition">
                Reading Notes: Web Penetration Testing with Kali Linux, Second Edition <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div onclick="showGitment()" id="gitment_title" class="gitment_title">显示 Gitment 评论</div>
      <div id="container" style="display:none"></div>
      <link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">
      <script src="https://imsun.github.io/gitment/dist/gitment.browser.js"></script>
      <script>
		const myTheme = {
    	  render(state, instance) {
      	  	const container = document.createElement('div');
      	  	container.lang = "en-US";
      	  	container.className = 'gitment-container gitment-root-container';
      	  	container.appendChild(instance.renderHeader(state, instance));
      	  	container.appendChild(instance.renderEditor(state, instance));
      	  	container.appendChild(instance.renderComments(state, instance));
      	  	container.appendChild(instance.renderFooter(state, instance));
      	  	return container;
    	  }
 		}	

  		function showGitment() {
    	  $("#gitment_title").attr("style", "display:none");
    	  $("#container").attr("style", "").addClass("gitment_container");
    	  var gitment = new Gitment({
      		id: window.location.pathname,
      		theme: myTheme,
      		owner: 'secretwiki',
      		repo: 'secretwiki_comments',
      		oauth: {
        		client_id: 'ee17d437b2ded4f7c3d7',
        		client_secret: '53bc77eae666c190ba9b98da98363461bc82b3e3'
     		 }	
    	  });
    	  gitment.render('container');
  		}
  	  </script>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.png"
               alt="Auooo" />
          <p class="site-author-name" itemprop="name">Auooo</p>
           
              <p class="site-description motion-element" itemprop="description">Pika-Pika</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="mailto:admin@secretwiki.org" target="_blank" title="mail">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  mail
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#环境说明"><span class="nav-number">1.</span> <span class="nav-text">环境说明</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装步骤"><span class="nav-number">2.</span> <span class="nav-text">安装步骤</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装后的配置–系统篇"><span class="nav-number">3.</span> <span class="nav-text">安装后的配置–系统篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#更新-Kali-Linux-中的软件包"><span class="nav-number">3.1.</span> <span class="nav-text">更新 Kali Linux 中的软件包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更新-Kali-Linux-的内核头文件"><span class="nav-number">3.2.</span> <span class="nav-text">更新 Kali Linux 的内核头文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-Nvidia-显卡驱动"><span class="nav-number">3.3.</span> <span class="nav-text">安装 Nvidia 显卡驱动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挂载第二块硬盘"><span class="nav-number">3.4.</span> <span class="nav-text">挂载第二块硬盘</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#笔记本触摸板的配置"><span class="nav-number">3.5.</span> <span class="nav-text">笔记本触摸板的配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-architecture-i386"><span class="nav-number">3.6.</span> <span class="nav-text">为 64 位系统添加 32 位架构的支持</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#修改并发限制"><span class="nav-number">3.7.</span> <span class="nav-text">修改并发限制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#（可选）配置网络"><span class="nav-number">3.8.</span> <span class="nav-text">（可选）配置网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置临时-IP-地址"><span class="nav-number">3.8.1.</span> <span class="nav-text">配置临时 IP 地址</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#持久配置-IP-地址"><span class="nav-number">3.8.2.</span> <span class="nav-text">持久配置 IP 地址</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#install-fonts"><span class="nav-number">3.9.</span> <span class="nav-text">安装字体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#增加非-root-账户"><span class="nav-number">3.10.</span> <span class="nav-text">增加非 root 账户</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#快捷键设置"><span class="nav-number">3.11.</span> <span class="nav-text">快捷键设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#电源优化"><span class="nav-number">3.12.</span> <span class="nav-text">电源优化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据需要开启系统服务"><span class="nav-number">3.13.</span> <span class="nav-text">根据需要开启系统服务</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装后的配置–常用软件篇"><span class="nav-number">4.</span> <span class="nav-text">安装后的配置–常用软件篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#安装完整版-Kali-Linux"><span class="nav-number">4.1.</span> <span class="nav-text">安装完整版 Kali Linux</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-watchdog"><span class="nav-number">4.2.</span> <span class="nav-text">安装 watchdog</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#配置中文输入法"><span class="nav-number">4.3.</span> <span class="nav-text">配置中文输入法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IBUS"><span class="nav-number">4.3.1.</span> <span class="nav-text">IBUS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#（推荐）fcitx"><span class="nav-number">4.3.2.</span> <span class="nav-text">（推荐）fcitx</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-Chromium-Chrome-浏览器"><span class="nav-number">4.4.</span> <span class="nav-text">安装 Chromium/Chrome 浏览器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装翻墙软件"><span class="nav-number">4.5.</span> <span class="nav-text">安装翻墙软件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-Shadowsocks-客户端"><span class="nav-number">4.5.1.</span> <span class="nav-text">安装 Shadowsocks 客户端</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-Lantern-客户端"><span class="nav-number">4.5.2.</span> <span class="nav-text">安装 Lantern 客户端</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#更换-JDK-（多版本-JDK-共存）"><span class="nav-number">4.6.</span> <span class="nav-text">更换 JDK （多版本 JDK 共存）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-IDE"><span class="nav-number">4.7.</span> <span class="nav-text">安装 IDE</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Pycharm"><span class="nav-number">4.7.1.</span> <span class="nav-text">Pycharm</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装文本编辑器"><span class="nav-number">4.8.</span> <span class="nav-text">安装文本编辑器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#小巧的文本编辑器-Notepadqq"><span class="nav-number">4.8.1.</span> <span class="nav-text">小巧的文本编辑器 Notepadqq</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-平台下的-Office-编辑套件-LibreOffice"><span class="nav-number">4.8.2.</span> <span class="nav-text">Linux 平台下的 Office 编辑套件 LibreOffice</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MarkDown-编辑器-ReText"><span class="nav-number">4.8.3.</span> <span class="nav-text">MarkDown 编辑器 ReText</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装虚拟化软件"><span class="nav-number">4.9.</span> <span class="nav-text">安装虚拟化软件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VirtualBox"><span class="nav-number">4.9.1.</span> <span class="nav-text">VirtualBox</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VMWare-WorkStation"><span class="nav-number">4.9.2.</span> <span class="nav-text">VMWare WorkStation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker"><span class="nav-number">4.9.3.</span> <span class="nav-text">Docker</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装多媒体播放器"><span class="nav-number">4.10.</span> <span class="nav-text">安装多媒体播放器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#音乐播放器-DeaDBeeF"><span class="nav-number">4.10.1.</span> <span class="nav-text">音乐播放器 DeaDBeeF</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#网易云音乐"><span class="nav-number">4.10.2.</span> <span class="nav-text">网易云音乐</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三方的网易云音乐播放器-FeelUOwn"><span class="nav-number">4.10.3.</span> <span class="nav-text">第三方的网易云音乐播放器 FeelUOwn</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#安装-QQ"><span class="nav-number">4.11.</span> <span class="nav-text">安装 QQ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#其他需要的软件"><span class="nav-number">4.12.</span> <span class="nav-text">其他需要的软件</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#安装后的配置–浏览器篇"><span class="nav-number">5.</span> <span class="nav-text">安装后的配置–浏览器篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Chromium"><span class="nav-number">5.1.</span> <span class="nav-text">Chromium</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#安装-Flash-插件"><span class="nav-number">5.1.1.</span> <span class="nav-text">安装 Flash 插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关闭-GPU-加速"><span class="nav-number">5.1.2.</span> <span class="nav-text">关闭 GPU 加速</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Firefox"><span class="nav-number">5.2.</span> <span class="nav-text">Firefox</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Flash-插件"><span class="nav-number">5.2.1.</span> <span class="nav-text">Flash 插件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#渗透测试相关扩展"><span class="nav-number">5.2.2.</span> <span class="nav-text">渗透测试相关扩展</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#FAQ"><span class="nav-number">6.</span> <span class="nav-text">FAQ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#root-pass-rec"><span class="nav-number">6.1.</span> <span class="nav-text">通过单用户模式找回root密码</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chg-dir-lang"><span class="nav-number">6.2.</span> <span class="nav-text">将中文目录改为英文目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#add-kali-src"><span class="nav-number">6.3.</span> <span class="nav-text">添加 kali 官方网络更新源</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#restore-nvidia-driver-failure"><span class="nav-number">6.4.</span> <span class="nav-text">修复 Kali Linux 安装 Nvidia 显卡驱动后报错 “something has gone wrong” </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#enable-prime-sync"><span class="nav-number">6.5.</span> <span class="nav-text">启用 PRIME 同步 (PRIME Sync) 来解决屏幕撕裂问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chromium-unblock-third-party-cookies"><span class="nav-number">6.6.</span> <span class="nav-text">Chromium 浏览器只能看见播放框但没有播放内容的解决方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#manage-docker-as-a-non-root-user"><span class="nav-number">6.7.</span> <span class="nav-text">使用非 root 用户管理 Docker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#configure-docker-to-start-on-boot"><span class="nav-number">6.8.</span> <span class="nav-text">配置 Docker 随系统启动</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#change-default-image-container-location-docker"><span class="nav-number">6.9.</span> <span class="nav-text">修改 Docker 默认的镜像和容器存储位置</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Auooo</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>


        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      本站访客数
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      人次
    </span>
  

  
    <span class="site-pv">
      本站总访问量
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      次
    </span>
  
</div>


        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>

  
  <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (search_path.endsWith("json")) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
  <script>AV.initialize("I66euxHJUQMgUb4Yx4VazTP6-gzGzoHsz", "FMtuaB0EPvpmzwSiLPFaetkk");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



  

  

  

  

</body>
</html>
